{"ast":null,"code":"var _jsxFileName = \"/home/erico/Unb/rocketseat/ignite/cap2/eb-money/src/TransactionsContext.tsx\",\n    _s = $RefreshSig$();\n\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport { api } from './services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TransactionContext = /*#__PURE__*/createContext({});\nexport function TransacionsProvider({\n  children\n}) {\n  _s();\n\n  const data = useContext(TransactionContext);\n  const [transactions, setTransactions] = useState([]);\n  useEffect(() => {\n    api.get('/transactions').then(response => setTransactions(response.data.transactions));\n  }, []);\n\n  async function createTransaction(transactionInput) {\n    const response = await api.post('/transactions', { ...transactionInput,\n      createdAt: new Date()\n    });\n    const {\n      transaction\n    } = response.data;\n    setTransactions([...transactions, transaction]);\n  }\n\n  return /*#__PURE__*/_jsxDEV(TransactionContext.Provider, {\n    value: {\n      transactions,\n      createTransaction\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n}\n\n_s(TransacionsProvider, \"fobnj71I+ylhmeKGXjcYEZkdnG4=\");\n\n_c = TransacionsProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"TransacionsProvider\");","map":{"version":3,"sources":["/home/erico/Unb/rocketseat/ignite/cap2/eb-money/src/TransactionsContext.tsx"],"names":["createContext","useContext","useEffect","useState","api","TransactionContext","TransacionsProvider","children","data","transactions","setTransactions","get","then","response","createTransaction","transactionInput","post","createdAt","Date","transaction"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,EAAoCC,SAApC,EAA+CC,QAA/C,QAA0E,OAA1E;AACA,SAASC,GAAT,QAAoB,gBAApB;;AAwBA,OAAO,MAAMC,kBAAkB,gBAAGL,aAAa,CAA0B,EAA1B,CAAxC;AAEP,OAAO,SAASM,mBAAT,CAA6B;AAACC,EAAAA;AAAD,CAA7B,EAAmE;AAAA;;AACtE,QAAMC,IAAI,GAAGP,UAAU,CAACI,kBAAD,CAAvB;AAEA,QAAK,CAACI,YAAD,EAAeC,eAAf,IAAkCP,QAAQ,CAAgB,EAAhB,CAA/C;AAEAD,EAAAA,SAAS,CAAC,MAAI;AACVE,IAAAA,GAAG,CAACO,GAAJ,CAAQ,eAAR,EACKC,IADL,CACUC,QAAQ,IAAEH,eAAe,CAACG,QAAQ,CAACL,IAAT,CAAcC,YAAf,CADnC;AAEH,GAHQ,EAGP,EAHO,CAAT;;AAKA,iBAAeK,iBAAf,CAAiCC,gBAAjC,EAAoE;AAC/D,UAAMF,QAAQ,GAAI,MAAMT,GAAG,CAACY,IAAJ,CAAS,eAAT,EAA0B,EAAC,GAAGD,gBAAJ;AAAsBE,MAAAA,SAAS,EAAE,IAAIC,IAAJ;AAAjC,KAA1B,CAAxB;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAkBN,QAAQ,CAACL,IAAjC;AAEAE,IAAAA,eAAe,CAAC,CAAC,GAAGD,YAAJ,EAAkBU,WAAlB,CAAD,CAAf;AAEJ;;AAED,sBACI,QAAC,kBAAD,CAAoB,QAApB;AAA6B,IAAA,KAAK,EAAE;AAAEV,MAAAA,YAAF;AAAgBK,MAAAA;AAAhB,KAApC;AAAA,cACKP;AADL;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH;;GAvBeD,mB;;KAAAA,mB","sourcesContent":["import { createContext, useContext, useEffect, useState, ReactNode } from 'react'\nimport { api } from './services/api';\n\n\n\ninterface Transaction{\n    id: number;\n    title: string;\n    amount: number;\n    type: string;\n    category:string;\n    createdAt: string;\n}\n\ntype TransactionInput = Omit<Transaction, 'id'| 'createdAt'>;\n\ninterface TransactionsProviderProps{\n    children: ReactNode;\n}\n\ninterface TranscationsContextData{\n    transactions: Transaction[];\n    createTransaction: (transaction: TransactionInput) => Promise<void>;\n}\n\nexport const TransactionContext = createContext<TranscationsContextData>({} as TranscationsContextData);\n\nexport function TransacionsProvider({children}: TransactionsProviderProps){\n    const data = useContext(TransactionContext);\n\n    const[transactions, setTransactions] = useState<Transaction[]>([]);\n\n    useEffect(()=>{\n        api.get('/transactions')\n            .then(response=>setTransactions(response.data.transactions))\n    },[]);\n\n    async function createTransaction(transactionInput: TransactionInput){\n         const response =  await api.post('/transactions', {...transactionInput, createdAt: new Date()})\n         const { transaction } = response.data;\n\n         setTransactions([...transactions, transaction])\n\n    }\n\n    return (\n        <TransactionContext.Provider value={{ transactions, createTransaction }}>\n            {children}\n        </TransactionContext.Provider>\n    ); \n}"]},"metadata":{},"sourceType":"module"}